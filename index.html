<h1>Large Text Uploader - Ethereum</h1>
<p>This tool uses EIP-4844 calldata to upload large batches of text to the Ethereum blockchain</p>
<p>The maximum size of an upload varies based on the block gas limit. Usually it varies from 1-2M English characters (200k-1M characters for non-English languages.</p>
<p>If your upload exceeds the block gas limit, you will see an error on the transaction submission screen in your wallet.</p>

<textarea placeholder="Copy text here..." rows="20" cols="80" id="upload-text"></textarea>
<p>Character Count: <span id="char-count">0</span></p>
<button id="submit-text">Upload</button>

<script>
// Update char count while typing
document.getElementById('upload-text').addEventListener('input', async function (e) {
  const charCount = document.getElementById('upload-text').value.length
  document.getElementById('char-count').innerHTML = charCount
})

document.getElementById('submit-text').addEventListener('click', async function (e) {
  const charCount = document.getElementById('upload-text').value.length
  const text = document.getElementById('upload-text').value 
    .split("")
    .map(c => c.charCodeAt(0).toString(16).padStart(2, "0"))
    .join("")
  const accounts = await window.ethereum.request({
    method: "eth_requestAccounts"
  })
  const txHash = await window.ethereum.request({
    method: "eth_sendTransaction",
    params: [
      {
        from: accounts[0],
        to: accounts[0],
        value: '0',
        data: '0x' + text
      },
    ],
  })
})
</script>
